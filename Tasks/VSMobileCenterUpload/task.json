{
    "id": "B832BEC5-8C27-4FEF-9FB8-6BEC8524AD8A",
    "name": "VSMobileCenterUpload",
    "friendlyName": "Visual Studio Mobile Center Upload",
    "description": "Upload mobile app packages to Visual Stuidio Mobile Center",
    "helpMarkDown": "Upload mobile app packages to Visual Stuidio Mobile Center",
    "category": "Deploy",
    "visibility": [
        "Build"
    ],
    "author": "Microsoft Corporation",
    "version": {
        "Major": 0,
        "Minor": 0,
        "Patch": 1
    },
    "groups": [
        {
            "name": "symbols",
            "displayName": "Symbols",
            "isExpanded": true
        }
    ],
    "inputs": [
        {
            "name": "serverEndpoint",
            "type": "connectedService:vsmobilecenter",
            "label": "Mobile Center Connection",
            "defaultValue": "",
            "required": true,
            "helpMarkDown": "Select the service endpoint for your Visual Studio Mobile Center connection. To create one, click the Manage link and create a new Service Endpoint."
        },
        {
            "name": "appSlug",
            "type": "string",
            "label": "App Slug",
            "defaultValue": "",
            "required": true,
            "helpMarkDown": "The app slug is in the format of {username}/{app_identifier}.  To locate {username} and {app_identifier} for an app, click on its name from https://mobile.azure.com/apps, and the resulting url is in the format of https://mobile.azure.com/users/{username}/apps/{app_identifier}" 
        },
        {
            "name": "app",
            "type": "filePath",
            "label": "Binary File Path",
            "defaultValue": "",
            "required": true,
            "helpMarkDown": "Relative path from the repo root to the apk or ipa file you want to publish"
        },
        {
            "name": "symbolsType",
            "type": "pickList",
            "label": "Symbols Type",
            "required": false,
            "defaultValue": "Apple",
            "groupName": "symbols",
            "options": {
                "Apple": "Apple",
                "AndroidJava": "Android (Java)",
                "AndroidNative": "Android (Native)",
                "Windows": "Windows"                
            }
        },
        {
            "name": "symbolsPath",
            "type": "filePath",
            "label": "Symbols Path",
            "groupName": "symbols",
            "required": false,
            "helpMarkDown": "Relative path from the repo root to the symbols folder.",
            "visibleRule": "symbolsType = Windows || symbolsType == AndroidNative"
        },
        {
            "name": "dsymPath",
            "type": "filePath",
            "label": "dSYM Path",
            "groupName": "symbols",
            "required": false,
            "helpMarkDown": "Relative path from the repo root to dSYM folder.",
            "visibleRule": "symbolsType = Apple"
        },
        {
            "name": "mappingTxtPath",
            "type": "filePath",
            "label": "Mapping File",
            "groupName": "symbols",
            "required": false,
            "helpMarkDown": "Relative path from the repo root to Android's mapping.txt file.",
            "visibleRule": "symbolsType = AndroidJava"
        },
        {
            "name": "packParentFolder",
            "type": "boolean",
            "label": "Include All Items in Parent Folder",
            "groupName": "symbols",
            "required": false,
            "helpMarkDown": "Upload the selected symbols file / folder and every other items inside the same parent folder."
        },
        {
            "name": "releaseNotesSelection",
            "type": "radio",
            "label": "Create Release Notes",
            "required": true,
            "defaultValue": "input",
            "options": {
                "input": "Enter Release Notes",
                "file": "Select Release Notes File"
            }
        },       
        {
            "name": "releaseNotesInput",
            "type": "multiLine",
            "label": "Release Notes",
            "required": true,
            "helpMarkDown": "Release Notes for this version.",
            "visibleRule": "releaseNotesSelection = input"
        },
        {
            "name": "releaseNotesFile",
            "type": "filePath",
            "label": "Release Notes File",
            "required": true,
            "helpMarkDown": "Select a UTF-8 encoded text file which contains the Release Notes for this version.",
            "visibleRule": "releaseNotesSelection = file"
        },
        {
            "name": "distributionGroupId",
            "type": "string",
            "defaultValue": "",
            "label": "Distribution Group Id",
            "helpMarkDown": "Id of the distribution group app will deploy to, leave it empty for the default group.",
            "required": false 
        }
    ],
    "instanceNameFormat": "Deploy $(app) to Visual Studio Mobile Center",
    "execution": {
        "Node": {
            "target": "vsmobilecenterupload.js",
            "argumentFormat": ""
        }
    }
}
