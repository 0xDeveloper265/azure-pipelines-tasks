{
    "id": "049918CB-1488-48EB-85E8-C318ECCAAA74",
    "name": "XamarinTestCloud",
    "friendlyName": "Xamarin Test Cloud",
    "description": "Test mobile apps with Xamarin Test Cloud",
    "category": "Build",
    "author": "Microsoft Corporation",
    "version": {
        "Major": 1,
        "Minor": 0,
        "Patch": 0,
        "IsTest": false
    },
    "demands": [
    ],
    "groups": [
        {
            "name": "advanced",
            "displayName": "Advanced",
            "isExpanded": true 
        }
    ],
    "inputs": [
        {
            "name": "app",
            "type": "filePath",
            "label": "App",
            "defaultValue": "",
            "required": true,
            "helpMarkDown": "Relative path from repo root of the app(s) to test.  Wildcards can be used.  For example, `**\\*.apk` for all apk files in all subfolders."
        },
        {
            "name": "testFramework",
            "type": "radio",
            "label": "Framework",
            "required": true,
            "defaultValue": "xamarinUITest",
            "options": {
                "xamarinUITest": "Xamarin.UITest",
                "calabash": "Calabash"
            }
        },
        {
            "name": "teamApiKey",
            "type": "string",
            "label": "Team API Key",
            "defaultValue": "",
            "required": true,
            "helpMarkDown": "Xamarin Test Cloud Team API key."
        },
        {
            "name": "user",
            "type": "string",
            "label": "User Email",
            "defaultValue": "",
            "required": true,
            "helpMarkDown": "User name this test will run under."
        },
        {
            "name": "devices",
            "type": "string",
            "label": "Devices",
            "defaultValue": "",
            "required": true,
            "helpMarkDown": "Device IDs for Xamarin Test Cloud"
        },
        {
            "name": "series",
            "type": "string",
            "label": "Series",
            "defaultValue": "master",
            "required": true,
            "helpMarkDown": "Organize test runs by series (e.g. master, production, beta)."
        },
        {
            "name": "testDir",
            "type": "filePath",
            "label": "Test Assemembly Directory",
            "defaultValue": "",
            "required": true,
            "visibleRule": "testFramework = xamarinUITest",
            "helpMarkDown": "Relative path to the folder that contains the test assemblies."
        },
        {
            "name": "testCloudLocation",
            "type": "string",
            "label": "test-cloud.exe Location",
            "defaultValue": "$(Agent.BuildDirectory)\\**\\packages\\**\\tools\\test-cloud.exe",
            "required": true,
            "visibleRule": "testFramework = xamarinUITest"
        },
        {
            "name": "parallelization",
            "type": "pickList",
            "label": "Parallelization",
            "required": true,
            "defaultValue": "none",
            "visibleRule": "testFramework = xamarinUITest",
            "options": {
                "none": "None",
                "--fixture-chunk": "By test fixture",
                "--test-chunk": "By test method"
            }
        },
        {
            "name": "workspace",
            "type": "filePath",
            "label": "Workspace",
            "required": true,
            "defaultValue": "$(Build.SourcesDirectory)",
            "helpMarkDown":  "Path to your Calabash workspace (containing your features folder)",
            "visibleRule": "testFramework = calabash"
        },
        {
            "name": "configFile",
            "type": "filePath",
            "label": "Cucumber configuration file",
            "required": true,
            "defaultValue": "",
            "visibleRule": "testFramework = calabash",
            "helpMarkDown":  "Cucumber configuration file (cucumber.yml)"
        },
        {
            "name": "profile",
            "type": "string",
            "label": "Profile",
            "required": true,
            "defaultValue": "",
            "visibleRule": "testFramework = calabash",
            "helpMarkDown": "Profile to run (profile from cucumber.yml)"
        },
        {
            "name": "appName",
            "type": "string",
            "label": "App Name",
            "defaultValue": "",
            "required": false,
            "groupName": "advanced"
        },
        {
            "name": "locale",
            "type": "pickList",
            "label": "System language",
            "defaultValue": "en_US",
            "required": true,
            "groupName": "advanced",
            "options": {
                "en_US": "English (United States)",
                "en_GB": "English (United Kingdom)",
                "fr_FR": "French (France)",
                "de_DE": "German (Germany)",
                "ja_JP": "Japanese (Japan)",
                "ru_RU": "Russian (Russia)",
                "es_MX": "Spanish (Mexico)",
                "es_ES": "Spanish (Spain)"
            }
        },
        {
            "name": "optionalArgs",
            "type": "string",
            "label": "Optional Arguments",
            "required": false,
            "defaultValue": "",
            "groupName": "advanced",
            "helpMarkDown":  "Additional arguments passed to the test-cloud tool."
        }
    ],
    "instanceNameFormat": "Test Xamarin App $(app)",
    "execution": {
        "PowerShell": {
            "target": "$(currentDirectory)\\XamarinTestCloud.ps1",
            "argumentFormat": "",
            "workingDirectory": "$(currentDirectory)"
        }
    }
}
